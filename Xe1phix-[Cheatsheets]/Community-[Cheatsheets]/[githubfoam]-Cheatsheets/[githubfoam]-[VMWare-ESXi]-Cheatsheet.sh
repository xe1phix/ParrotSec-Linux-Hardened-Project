-------------------------------------------------------------------------------------------------------------------
#vmware vSphere/esxi 6.7x 
-------------------------------------------------------------------------------------------------------------------
Monitor-Task & Events-Events
#VM guest host os list
vcenter-vm_cluster-VMS-Columns-Export	
-------------------------------------------------------------------------------------------------------------------
#A virtual machine consists of the following files

.vmx 	vmname.vmx 	Virtual machine configuration file
.vmxf 	vmname.vmxf 	Additional virtual machine configuration files
.vmdk 	vmname.vmdk 	Virtual disk characteristics
-flat.vmdk 	vmname-flat.vmdk 	Virtual machine data disk
.nvram 	vmname.nvram or nvram 	Virtual machine BIOS or EFI configuration
.vmsd 	vmname.vmsd 	Virtual machine snapshots
.vmsn 	vmname.vmsn 	Virtual machine snapshot data file
.vswp 	vmname.vswp 	Virtual machine swap file
.vmss 	vmname.vmss 	Virtual machine suspend file
.log 	vmware.log 	Current virtual machine log file
-#.log 	vmware-#.log (where # is a number starting with 1) 	Old virtual machine log files
-------------------------------------------------------------------------------------------------------------------
#Enable SSH on VMware ESXi 6.x

#Direct Console User Interface (DCUI) option1
Remote console to the DCUI screen of the ESXi host
F2-Login-Troubleshooting Options-Enable SSH

#Enable SSH | vSphere Web Client – Host option 1 
Log into the ESXi host via the Web Client
Host-Actions-Services-Enable Secure Shell #option 1
Manage-Services-select SSH- Actions-Start #option 2

#Enable SSH | vSphere Web Client – vCenter
#Log into the vCenter instance via the web client.
Select Host-Configure-System-Security Profile-Services-Edit-SSH service-Start
-------------------------------------------------------------------------------------------------------------------
# VM guest IP,Guest OS,Host Memory,Guest Memory %, list
Datacenter-esxi host - VMs tab
-------------------------------------------------------------------------------------------------------------------
#Enabling ESXi Shell access using the vSphere Client
#Start and stop manually, the service does not start when you reboot the host
#the service to start when you reboot the host, select Start and stop with host.
Select the host in the Inventory panel -Configuration tab-System-Services-ESXi Shell
Select the host in the Inventory panel -Configuration tab-System-Services-SSH
-------------------------------------------------------------------------------------------------------------------
#Unable to connect to an ESX host using Secure Shell (SSH)

#1 Verify that there is network connectivity between the SSH client and the ESX host
#Testing VMkernel network connectivity with the vmkping command,Connect to the ESXi host using an SSH session
vmkping -I vmkX x.x.x.x #x.x.x.x is the hostname or IP address of the server,vmkX is the vmkernel interface
vmkping -d -s 8972 x.x.x.x #If Jumbo Frames configured,with the -s and -d options
vmkping -I vmkX x.x.x.x -d -s 1472 #test 1500 MTU
esxcfg-nics -l #Verification of MTU size
vmkping -I vmk0 10.0.0.1
ping esxi_host_ip

#2 Verify that port 22 on the ESX host can be reached from the SSH client machine
telnet server port

#3 Verify that the username and password is correct by logging directly in to the console
#A common error is to use an incorrect username or password, which causes a login failure and an access denied error message to appear

#4 Verify that the SSH Daemon is running
#esx-host secure-shell-daemon secure-shell-daemon-not-running sshd-not-running ssh-service
ps -ef | grep sshd
chkconfig --list sshd
chkconfig --level 2345 sshd on #enable sshd startup
service sshd start 
 
#5 Verify that user(root) is permitted to access the host via SSH

-------------------------------------------------------------------------------------------------------------------
esxi 6.x Host events log 
-------------------------------------------------------------------------------------------------------------------
#entries similar to every 30 seconds
# These events are been generated by a script called vnicen.sh located here /etc/init.d/ and gets installed when using a Customized Image of VMware ESXi
#/var/log/syslog.log
#/var/log/hostd.log
# /etc/init.d/vnicen.sh stop 
#chkconfig vnicen.sh off ^Ensure that the vnicen does not start upon reboot
#chkconfig --list | grep vnicen
Description:
04/30/2021, 9:09:04 AM User root@127.0.0.1 logged out (login time: Friday, April 30, 2021 8:09:04 AM UTC, number of API invocations: 7, user agent: pyvmomi Python/3.5.9 (VMkernel; 7.0.1; x86_64))
Related events:
There are no related events.
-------------------------------------------------------------------------------------------------------------------
#Cluster warning for ESXi Shell and SSH appear
#enable both Remote SSH and the ESXi Shell for management of hosts from the vSphere Client, vSphere Web Client and from the Direct Console User Interface
#These messages that appear with a yellow exclamation mark 
#is a proactive security measure and inform administrators that remote access is enabled for the server
#Disabling Remote SSH and ESXi Shell removes the messages from the host
ESXi Shell for the Host has been enabled
SSH for the host has been enabled

Select the ESXi host from the Inventory-Configure tab-System menu-Advanced Settings-UserVars.SuppressShellWarning
Set the value from 0 to 1

vim-cmd hostsvc/advopt/update UserVars.SuppressShellWarning long 1 #disable these warnings using esxcli
vim-cmd hostsvc/advopt/update UserVars.SuppressShellWarning long 0 #enable these warnings using esxcli
-------------------------------------------------------------------------------------------------------------------